https://docs.blockbit.com/pages/viewpage.action?pageId=26828792
641
['', 'Clusters - Validação das Configurações', '']
['', "Para efetuar a validação, iremos acessar a CLI do Logger Primário e Secundário e rodar alguns comandos, caso necessite de mais informações a respeito, consulte esta página.Um dos testes mais simples para validar a comunicação entre os Loggers é efetuar um ping do Primário (172.31.240.1) para o Secundário (172.31.240.2) e verificar se há resposta, conforme demonstrado pela imagem a seguir:CLI - Validação da comunicação do Logger Primário para o SecundárioTambém é possível efetuarmos estes mesmos passos na outra ponta, segue uma demonstração usando o comando ping para verificar a comunicação do Logger Secundário (172.31.240.2) para o Primário (172.31.240.1):CLI - Validação da comunicação do\xa0Logger Secundário para\xa0Primário através do comando\xa0PingOutro teste que podemos executar é: Usar o comando\xa0[shutdown] na Logger primária ativa para verificar através do\xa0[debug-ha]\xa0se a secundária efetuará o failover e será ativada automaticamente, segue o que deve ser exibido na CLI do Logger secundário:CLI - debug da H.A.\xa0no Logger Secundário exibindo failoverCaso um e-mail tenha sido cadastrado, como exemplificado ao Configurar o Cluster, uma notificação será enviada todas notificando que o logger primário está offline:E-mail notification - Can't connect to primary loggerE após a execução com sucesso do failover, uma notificação de que o logger secundário assumiu a prioridade no cluster:E-mail notification - Replica activeAlém disso, estas alterações são representadas na interface, conforme demonstrado na imagem abaixo\xa0(Para mais informações consulte esta página):Clusters - Loggers\xa0Ao religar o Logger Primário, o\xa0[debug-ha] irá reconhecer que ele foi ligado, porém, não efetuará a ativação automaticamente, este comportamento é normal. Para ativar o primário de fato, será necessário acessar a interface do sistema e efetuar esse processo manualmente através do botão Activate Primary Logger\xa0[], segue o que é exibido na CLI:CLI - debug da H.A.\xa0no Logger Secundário detectando ativação do Logger PrimárioQuando o Logger Primário ficar online novamente, será enviado um e-mail reconhecendo este evento porém detectando que ela está inativa, afinal, a Logger secundária está ativa:E-mail notification - Primary inactiveE após a execução do sincronismo, mais uma notificação será enviada:E-mail notification - Connection reestablished with primary loggerA interface representará esta situação com o ícone ao lado do Logger Primário demonstrando que ele está online, porém o status denotando que a secundária está ativaClusters - Loggers\xa0Para ativar o Logger primário quando o secundário está online, devemos clicar no\xa0botão\xa0Activate Primary Logger\xa0[]. Novamente, é possível\xa0observar o comportamento dos Loggers através do comando\xa0[debug-ha], no Logger Primário, todo o processo de sincronismo e ativação será detalhado:CLI - debug da H.A.\xa0no Logger Primário detectando ativação e sincronismo do Logger PrimárioA seguir as informações que são exibidas considerando o mesmo cenário citado acima, porém ao aplicar o comando\xa0[debug-ha]\xa0no Logger Secundário:CLI - debug da H.A.\xa0no Logger SecundárioQuando o sincronismo do Logger Primário for finalizado, será enviado um e-mail reconhecendo este evento:E-mail - Sync status: doneUm outro e-mail apontará a ativação da Logger Primária:E-mail - Primary ActiveE por fim, um último e-mail reconhecerá que Logger Secundária foi inativada:E-mail - Replica InactiveA interface representará esta situação com o ícone ao lado do Logger Primário demonstrando que ele está online, e o status denotando que a Primária está ativa:Clusters - Loggers\xa0Por fim, ao fazer qualquer ativação manual dos Loggers, um log de auditoria é criado em\xa0Audit Log, detalhando mais informações sobre a atividade executada, conforme demonstrado na imagem a seguir:Administration - Audit LogQuando\xa0a ativação de um dos loggers é realizada, o evento de atividade é listado como update. É\xa0possível consultar mais informações sobre clicando no botão\xa0[].Audit Log - Audit viewIsso finaliza a demonstração, para mais informações a respeito de Cluster de Loggers, consulte esta página.", '']
